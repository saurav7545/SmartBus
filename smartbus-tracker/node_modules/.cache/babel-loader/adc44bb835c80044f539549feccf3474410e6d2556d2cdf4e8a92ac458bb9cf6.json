{"ast":null,"code":"import React,{useEffect,useState,useRef,useCallback}from\"react\";import{MapContainer,TileLayer,Marker,Popup,useMap,Polyline}from\"react-leaflet\";import L from\"leaflet\";import\"leaflet/dist/leaflet.css\";import\"./App.css\";// Dynamic bus icon based on tracking state\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const getBusIcon=isMoving=>L.divIcon({html:\"\\n    <div class=\\\"bus-marker-mobile \".concat(isMoving?'moving':'',\"\\\">\\n      <div class=\\\"bus-icon-circle\\\">\\n        <div class=\\\"bus-icon\\\">\\uD83D\\uDE8C</div>\\n      </div>\\n    </div>\\n  \"),iconSize:[40,40],iconAnchor:[20,20],popupAnchor:[0,-25],className:'custom-bus-marker'});// User Location - Blue Dot\nconst userIcon=L.divIcon({html:\"\\n    <div class=\\\"user-marker-mobile\\\">\\n      <div class=\\\"user-dot\\\"></div>\\n    </div>\\n  \",iconSize:[16,16],iconAnchor:[8,8],popupAnchor:[0,-15],className:'custom-user-marker'});// Route coordinates\nconst routeCoords=[[30.3165,78.0322],// Dehradun\n[29.8661,77.8945],// Roorkee\n[29.4727,77.7085],// Muzaffarnagar\n[29.2100,77.0400],// Meerut\n[28.6139,77.2090]// Delhi\n];// Auto-move map to bus location with zoom control\nfunction MoveMapToBus(_ref){let{position,zoom,shouldZoom}=_ref;const map=useMap();useEffect(()=>{if(position){if(shouldZoom){// Zoom to bus location when tracking starts\nmap.setView(position,zoom||10,{animate:true,duration:1.5});}else{// Just pan to position during tracking\nmap.panTo(position,{animate:true,duration:0.8});}}},[position,map,zoom,shouldZoom]);return null;}function App(){const[busPosition,setBusPosition]=useState(routeCoords[0]);const[userPosition,setUserPosition]=useState(null);const[distance,setDistance]=useState(\"0.0\");const[eta,setEta]=useState(\"-- min\");const[currentIndex,setCurrentIndex]=useState(0);const[isTracking,setIsTracking]=useState(false);const[progress,setProgress]=useState(0);const[shouldZoomToStart,setShouldZoomToStart]=useState(false);const intervalRef=useRef(null);// Get user location\nuseEffect(()=>{if(navigator.geolocation){navigator.geolocation.getCurrentPosition(pos=>{setUserPosition([pos.coords.latitude,pos.coords.longitude]);},()=>{// Fallback to Delhi if geolocation fails\nsetUserPosition([28.6139,77.2090]);});}else{setUserPosition([28.6139,77.2090]);}},[]);// Calculate distance using Haversine formula\nconst calculateDistance=(pos1,pos2)=>{const toRad=x=>x*Math.PI/180;const R=6371;// Earth radius in km\nconst dLat=toRad(pos2[0]-pos1[0]);const dLon=toRad(pos2[1]-pos1[1]);const a=Math.sin(dLat/2)*Math.sin(dLat/2)+Math.cos(toRad(pos1[0]))*Math.cos(toRad(pos2[0]))*Math.sin(dLon/2)*Math.sin(dLon/2);const c=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return R*c;};// Update distance and ETA\nuseEffect(()=>{if(userPosition){const dist=calculateDistance(userPosition,busPosition);setDistance(dist.toFixed(1));const estimatedTime=Math.round(dist/0.8);// Assuming 0.8 km/min average speed\nsetEta(estimatedTime+\" min\");console.log('üìè Distance:',dist.toFixed(1),'km, ETA:',estimatedTime,'min');}},[busPosition,userPosition]);// Start bus tracking with better logic\nconst startTracking=useCallback(()=>{console.log('üöå Starting bus tracking...');setIsTracking(true);setShouldZoomToStart(true);// Trigger zoom to bus location\n// Reset zoom trigger after a moment\nsetTimeout(()=>setShouldZoomToStart(false),2000);intervalRef.current=setInterval(()=>{setCurrentIndex(prevIndex=>{const newIndex=prevIndex<routeCoords.length-1?prevIndex+1:prevIndex;console.log(\"\\uD83D\\uDE8C Moving from index \".concat(prevIndex,\" to \").concat(newIndex));if(newIndex<routeCoords.length){const newPosition=routeCoords[newIndex];console.log(\"\\uD83D\\uDCCD New position: \".concat(newPosition[0],\", \").concat(newPosition[1]));setBusPosition(newPosition);const progressPercent=newIndex/(routeCoords.length-1)*100;setProgress(progressPercent);console.log(\"\\uD83D\\uDCCA Progress: \".concat(Math.round(progressPercent),\"%\"));}if(newIndex>=routeCoords.length-1){console.log('üèÅ Bus reached destination!');clearInterval(intervalRef.current);setIsTracking(false);setProgress(100);}return newIndex;});},2500);// Faster updates - every 2.5 seconds\n},[]);// No dependencies needed\n// Stop bus tracking\nconst stopTracking=()=>{console.log('‚è∏Ô∏è Stopping bus tracking...');if(intervalRef.current){clearInterval(intervalRef.current);intervalRef.current=null;}setIsTracking(false);};// Reset tracking to start\nconst resetTracking=()=>{console.log('üîÑ Resetting bus tracking...');stopTracking();setCurrentIndex(0);setBusPosition(routeCoords[0]);setProgress(0);};// Auto-start tracking after component mount\nuseEffect(()=>{const autoStartTimer=setTimeout(()=>{console.log('üöÄ Auto-starting tracking...');startTracking();},3000);// Wait 3 seconds then auto-start\nreturn()=>{clearTimeout(autoStartTimer);if(intervalRef.current){clearInterval(intervalRef.current);}};},[startTracking]);// Include startTracking as dependency\n// Debug useEffect to track state changes\nuseEffect(()=>{console.log(\"\\uD83D\\uDCCA State Update - Index: \".concat(currentIndex,\", Tracking: \").concat(isTracking,\", Progress: \").concat(Math.round(progress),\"%\"));},[currentIndex,isTracking,progress]);return/*#__PURE__*/_jsxs(\"div\",{className:\"app-mobile\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header-mobile\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"back-btn\",children:\"\\u2190\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"header-title\",children:\"Live Tracking\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"map-container-mobile\",children:[/*#__PURE__*/_jsxs(MapContainer,{center:busPosition,zoom:7,style:{height:\"100%\",width:\"100%\"},attributionControl:false,children:[/*#__PURE__*/_jsx(TileLayer,{url:\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"}),/*#__PURE__*/_jsx(Polyline,{positions:routeCoords,color:\"#ff8c00\",weight:4,opacity:0.7}),/*#__PURE__*/_jsx(Marker,{position:busPosition,icon:getBusIcon(isTracking),children:/*#__PURE__*/_jsx(Popup,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"popup-content\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\uD83D\\uDE8C Live Bus Location\"}),/*#__PURE__*/_jsx(\"br\",{}),\"Progress: \",Math.round(progress),\"%\",/*#__PURE__*/_jsx(\"br\",{}),\"Status: \",isTracking?\"Moving\":\"Stopped\"]})})}),userPosition&&/*#__PURE__*/_jsx(Marker,{position:userPosition,icon:userIcon,children:/*#__PURE__*/_jsx(Popup,{children:/*#__PURE__*/_jsx(\"div\",{className:\"popup-content\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"\\uD83D\\uDCCD Your Location\"})})})}),/*#__PURE__*/_jsx(MoveMapToBus,{position:busPosition,zoom:12,shouldZoom:shouldZoomToStart})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"floating-controls-mobile\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"control-btn start-btn \".concat(isTracking?'active':'',\" \").concat(progress===100?'complete':''),onClick:isTracking?stopTracking:startTracking,title:isTracking?'Stop Tracking':'Start Tracking',children:/*#__PURE__*/_jsxs(\"div\",{className:\"start-btn-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"start-btn-icon\",children:progress===100?'üèÅ':isTracking?'‚è∏Ô∏è':'‚ñ∂Ô∏è'}),/*#__PURE__*/_jsx(\"div\",{className:\"start-btn-text\",children:progress===100?'Complete':isTracking?\"\".concat(Math.round(progress),\"%\"):'Start'})]})}),/*#__PURE__*/_jsx(\"button\",{className:\"control-btn reset-btn\",onClick:resetTracking,title:\"Reset to Start\",children:\"\\uD83D\\uDD04\"})]}),isTracking&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"info-circle distance-circle\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"info-circle-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"info-icon\",children:\"\\uD83D\\uDCCD\"}),/*#__PURE__*/_jsx(\"div\",{className:\"info-value\",children:distance||'0.0'}),/*#__PURE__*/_jsx(\"div\",{className:\"info-unit\",children:\"KM\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"info-circle time-circle\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"info-circle-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"info-icon\",children:\"\\uD83D\\uDD52\"}),/*#__PURE__*/_jsx(\"div\",{className:\"info-value\",children:eta?eta.split(' ')[0]:'0'}),/*#__PURE__*/_jsx(\"div\",{className:\"info-unit\",children:\"MIN\"})]})})]})]})]});}export default App;","map":{"version":3,"names":["React","useEffect","useState","useRef","useCallback","MapContainer","TileLayer","Marker","Popup","useMap","Polyline","L","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","getBusIcon","isMoving","divIcon","html","concat","iconSize","iconAnchor","popupAnchor","className","userIcon","routeCoords","MoveMapToBus","_ref","position","zoom","shouldZoom","map","setView","animate","duration","panTo","App","busPosition","setBusPosition","userPosition","setUserPosition","distance","setDistance","eta","setEta","currentIndex","setCurrentIndex","isTracking","setIsTracking","progress","setProgress","shouldZoomToStart","setShouldZoomToStart","intervalRef","navigator","geolocation","getCurrentPosition","pos","coords","latitude","longitude","calculateDistance","pos1","pos2","toRad","x","Math","PI","R","dLat","dLon","a","sin","cos","c","atan2","sqrt","dist","toFixed","estimatedTime","round","console","log","startTracking","setTimeout","current","setInterval","prevIndex","newIndex","length","newPosition","progressPercent","clearInterval","stopTracking","resetTracking","autoStartTimer","clearTimeout","children","center","style","height","width","attributionControl","url","positions","color","weight","opacity","icon","onClick","title","split"],"sources":["D:/PROJECT/smartbus-tracker/src/App.js"],"sourcesContent":["import React, { useEffect, useState, useRef, useCallback } from \"react\";\nimport { MapContainer, TileLayer, Marker, Popup, useMap, Polyline } from \"react-leaflet\";\nimport L from \"leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport \"./App.css\";\n\n// Dynamic bus icon based on tracking state\nconst getBusIcon = (isMoving) => L.divIcon({\n  html: `\n    <div class=\"bus-marker-mobile ${isMoving ? 'moving' : ''}\">\n      <div class=\"bus-icon-circle\">\n        <div class=\"bus-icon\">üöå</div>\n      </div>\n    </div>\n  `,\n  iconSize: [40, 40],\n  iconAnchor: [20, 20],\n  popupAnchor: [0, -25],\n  className: 'custom-bus-marker'\n});\n\n// User Location - Blue Dot\nconst userIcon = L.divIcon({\n  html: `\n    <div class=\"user-marker-mobile\">\n      <div class=\"user-dot\"></div>\n    </div>\n  `,\n  iconSize: [16, 16],\n  iconAnchor: [8, 8],\n  popupAnchor: [0, -15],\n  className: 'custom-user-marker'\n});\n\n// Route coordinates\nconst routeCoords = [\n  [30.3165, 78.0322], // Dehradun\n  [29.8661, 77.8945], // Roorkee\n  [29.4727, 77.7085], // Muzaffarnagar\n  [29.2100, 77.0400], // Meerut\n  [28.6139, 77.2090], // Delhi\n];\n\n// Auto-move map to bus location with zoom control\nfunction MoveMapToBus({ position, zoom, shouldZoom }) {\n  const map = useMap();\n  useEffect(() => {\n    if (position) {\n      if (shouldZoom) {\n        // Zoom to bus location when tracking starts\n        map.setView(position, zoom || 10, {\n          animate: true,\n          duration: 1.5\n        });\n      } else {\n        // Just pan to position during tracking\n        map.panTo(position, {\n          animate: true,\n          duration: 0.8\n        });\n      }\n    }\n  }, [position, map, zoom, shouldZoom]);\n  return null;\n}\n\nfunction App() {\n  const [busPosition, setBusPosition] = useState(routeCoords[0]);\n  const [userPosition, setUserPosition] = useState(null);\n  const [distance, setDistance] = useState(\"0.0\");\n  const [eta, setEta] = useState(\"-- min\");\n  const [currentIndex, setCurrentIndex] = useState(0);\n  const [isTracking, setIsTracking] = useState(false);\n  const [progress, setProgress] = useState(0);\n  const [shouldZoomToStart, setShouldZoomToStart] = useState(false);\n  const intervalRef = useRef(null);\n\n  // Get user location\n  useEffect(() => {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(\n        (pos) => {\n          setUserPosition([pos.coords.latitude, pos.coords.longitude]);\n        },\n        () => {\n          // Fallback to Delhi if geolocation fails\n          setUserPosition([28.6139, 77.2090]);\n        }\n      );\n    } else {\n      setUserPosition([28.6139, 77.2090]);\n    }\n  }, []);\n\n  // Calculate distance using Haversine formula\n  const calculateDistance = (pos1, pos2) => {\n    const toRad = (x) => (x * Math.PI) / 180;\n    const R = 6371; // Earth radius in km\n    const dLat = toRad(pos2[0] - pos1[0]);\n    const dLon = toRad(pos2[1] - pos1[1]);\n    const a =\n      Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n      Math.cos(toRad(pos1[0])) * Math.cos(toRad(pos2[0])) * Math.sin(dLon / 2) * Math.sin(dLon / 2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    return R * c;\n  };\n\n  // Update distance and ETA\n  useEffect(() => {\n    if (userPosition) {\n      const dist = calculateDistance(userPosition, busPosition);\n      setDistance(dist.toFixed(1));\n      const estimatedTime = Math.round(dist / 0.8); // Assuming 0.8 km/min average speed\n      setEta(estimatedTime + \" min\");\n      console.log('üìè Distance:', dist.toFixed(1), 'km, ETA:', estimatedTime, 'min');\n    }\n  }, [busPosition, userPosition]);\n\n  // Start bus tracking with better logic\n  const startTracking = useCallback(() => {\n    console.log('üöå Starting bus tracking...');\n    setIsTracking(true);\n    setShouldZoomToStart(true); // Trigger zoom to bus location\n    \n    // Reset zoom trigger after a moment\n    setTimeout(() => setShouldZoomToStart(false), 2000);\n    \n    intervalRef.current = setInterval(() => {\n      setCurrentIndex(prevIndex => {\n        const newIndex = prevIndex < routeCoords.length - 1 ? prevIndex + 1 : prevIndex;\n        console.log(`üöå Moving from index ${prevIndex} to ${newIndex}`);\n        \n        if (newIndex < routeCoords.length) {\n          const newPosition = routeCoords[newIndex];\n          console.log(`üìç New position: ${newPosition[0]}, ${newPosition[1]}`);\n          setBusPosition(newPosition);\n          \n          const progressPercent = (newIndex / (routeCoords.length - 1)) * 100;\n          setProgress(progressPercent);\n          console.log(`üìä Progress: ${Math.round(progressPercent)}%`);\n        }\n        \n        if (newIndex >= routeCoords.length - 1) {\n          console.log('üèÅ Bus reached destination!');\n          clearInterval(intervalRef.current);\n          setIsTracking(false);\n          setProgress(100);\n        }\n        \n        return newIndex;\n      });\n    }, 2500); // Faster updates - every 2.5 seconds\n  }, []); // No dependencies needed\n\n  // Stop bus tracking\n  const stopTracking = () => {\n    console.log('‚è∏Ô∏è Stopping bus tracking...');\n    if (intervalRef.current) {\n      clearInterval(intervalRef.current);\n      intervalRef.current = null;\n    }\n    setIsTracking(false);\n  };\n\n  // Reset tracking to start\n  const resetTracking = () => {\n    console.log('üîÑ Resetting bus tracking...');\n    stopTracking();\n    setCurrentIndex(0);\n    setBusPosition(routeCoords[0]);\n    setProgress(0);\n  };\n\n\n  // Auto-start tracking after component mount\n  useEffect(() => {\n    const autoStartTimer = setTimeout(() => {\n      console.log('üöÄ Auto-starting tracking...');\n      startTracking();\n    }, 3000); // Wait 3 seconds then auto-start\n    \n    return () => {\n      clearTimeout(autoStartTimer);\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n      }\n    };\n  }, [startTracking]); // Include startTracking as dependency\n\n  // Debug useEffect to track state changes\n  useEffect(() => {\n    console.log(`üìä State Update - Index: ${currentIndex}, Tracking: ${isTracking}, Progress: ${Math.round(progress)}%`);\n  }, [currentIndex, isTracking, progress]);\n\n\n  return (\n    <div className=\"app-mobile\">\n      {/* Mobile Header - Orange */}\n      <div className=\"header-mobile\">\n        <button className=\"back-btn\">‚Üê</button>\n        <h1 className=\"header-title\">Live Tracking</h1>\n      </div>\n\n      {/* Main Map Container */}\n      <div className=\"map-container-mobile\">\n        <MapContainer\n          center={busPosition}\n          zoom={7}\n          style={{ height: \"100%\", width: \"100%\" }}\n          attributionControl={false}\n        >\n          <TileLayer\n            url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n          />\n          \n          {/* Route Line */}\n          <Polyline\n            positions={routeCoords}\n            color=\"#ff8c00\"\n            weight={4}\n            opacity={0.7}\n          />\n\n          {/* Bus Marker - Round Orange with Animation */}\n          <Marker position={busPosition} icon={getBusIcon(isTracking)}>\n            <Popup>\n              <div className=\"popup-content\">\n                <strong>üöå Live Bus Location</strong>\n                <br />Progress: {Math.round(progress)}%\n                <br />Status: {isTracking ? \"Moving\" : \"Stopped\"}\n              </div>\n            </Popup>\n          </Marker>\n\n          {/* User Marker - Blue Dot */}\n          {userPosition && (\n            <Marker position={userPosition} icon={userIcon}>\n              <Popup>\n                <div className=\"popup-content\">\n                  <strong>üìç Your Location</strong>\n                </div>\n              </Popup>\n            </Marker>\n          )}\n\n          <MoveMapToBus \n            position={busPosition} \n            zoom={12}\n            shouldZoom={shouldZoomToStart}\n          />\n        </MapContainer>\n\n\n        {/* Floating Control Buttons */}\n        <div className=\"floating-controls-mobile\">\n          <button \n            className={`control-btn start-btn ${isTracking ? 'active' : ''} ${progress === 100 ? 'complete' : ''}`}\n            onClick={isTracking ? stopTracking : startTracking}\n            title={isTracking ? 'Stop Tracking' : 'Start Tracking'}\n          >\n            <div className=\"start-btn-content\">\n              <div className=\"start-btn-icon\">\n                {progress === 100 ? 'üèÅ' : (isTracking ? '‚è∏Ô∏è' : '‚ñ∂Ô∏è')}\n              </div>\n              <div className=\"start-btn-text\">\n                {progress === 100 ? 'Complete' : (isTracking ? `${Math.round(progress)}%` : 'Start')}\n              </div>\n            </div>\n          </button>\n          <button \n            className=\"control-btn reset-btn\"\n            onClick={resetTracking}\n            title=\"Reset to Start\"\n          >\n            üîÑ\n          </button>\n        </div>\n\n\n\n        {/* New Circular Info Buttons - Show when tracking starts */}\n        {isTracking && (\n          <>\n            {/* Distance Circle */}\n            <div className=\"info-circle distance-circle\">\n              <div className=\"info-circle-content\">\n                <div className=\"info-icon\">üìç</div>\n                <div className=\"info-value\">{distance || '0.0'}</div>\n                <div className=\"info-unit\">KM</div>\n              </div>\n            </div>\n            \n            {/* Time Circle */}\n            <div className=\"info-circle time-circle\">\n              <div className=\"info-circle-content\">\n                <div className=\"info-icon\">üïí</div>\n                <div className=\"info-value\">{eta ? eta.split(' ')[0] : '0'}</div>\n                <div className=\"info-unit\">MIN</div>\n              </div>\n            </div>\n          </>\n        )}\n\n\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}