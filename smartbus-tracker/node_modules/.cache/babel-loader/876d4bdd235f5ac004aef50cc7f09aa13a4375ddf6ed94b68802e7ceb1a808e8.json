{"ast":null,"code":"var _jsxFileName = \"D:\\\\PROJECT\\\\smartbus-tracker\\\\src\\\\App.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useEffect, useState, useRef, useCallback } from \"react\";\nimport { MapContainer, TileLayer, Marker, Popup, useMap, Polyline } from \"react-leaflet\";\nimport L from \"leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport \"./App.css\";\n\n// Dynamic bus icon based on tracking state\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst getBusIcon = isMoving => L.divIcon({\n  html: `\n    <div class=\"bus-marker-mobile ${isMoving ? 'moving' : ''}\">\n      <div class=\"bus-icon-circle\">\n        <div class=\"bus-icon\">🚌</div>\n      </div>\n    </div>\n  `,\n  iconSize: [40, 40],\n  iconAnchor: [20, 20],\n  popupAnchor: [0, -25],\n  className: 'custom-bus-marker'\n});\n\n// User Location - Blue Dot\nconst userIcon = L.divIcon({\n  html: `\n    <div class=\"user-marker-mobile\">\n      <div class=\"user-dot\"></div>\n    </div>\n  `,\n  iconSize: [16, 16],\n  iconAnchor: [8, 8],\n  popupAnchor: [0, -15],\n  className: 'custom-user-marker'\n});\n\n// Route coordinates\nconst routeCoords = [[30.3165, 78.0322],\n// Dehradun\n[29.8661, 77.8945],\n// Roorkee\n[29.4727, 77.7085],\n// Muzaffarnagar\n[29.2100, 77.0400],\n// Meerut\n[28.6139, 77.2090] // Delhi\n];\n\n// Auto-move map to bus location with zoom control\nfunction MoveMapToBus({\n  position,\n  zoom,\n  shouldZoom\n}) {\n  _s();\n  const map = useMap();\n  useEffect(() => {\n    if (position) {\n      if (shouldZoom) {\n        // Zoom to bus location when tracking starts\n        map.setView(position, zoom || 10, {\n          animate: true,\n          duration: 1.5\n        });\n      } else {\n        // Just pan to position during tracking\n        map.panTo(position, {\n          animate: true,\n          duration: 0.8\n        });\n      }\n    }\n  }, [position, map, zoom, shouldZoom]);\n  return null;\n}\n_s(MoveMapToBus, \"IoceErwr5KVGS9kN4RQ1bOkYMAg=\", false, function () {\n  return [useMap];\n});\n_c = MoveMapToBus;\nfunction App() {\n  _s2();\n  const [busPosition, setBusPosition] = useState(routeCoords[0]);\n  const [userPosition, setUserPosition] = useState(null);\n  const [distance, setDistance] = useState(\"0.0\");\n  const [eta, setEta] = useState(\"-- min\");\n  const [currentIndex, setCurrentIndex] = useState(0);\n  const [isTracking, setIsTracking] = useState(false);\n  const [progress, setProgress] = useState(0);\n  const [showExpandedInfo, setShowExpandedInfo] = useState(false);\n  const [shouldZoomToStart, setShouldZoomToStart] = useState(false);\n  const intervalRef = useRef(null);\n\n  // Get user location\n  useEffect(() => {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(pos => {\n        setUserPosition([pos.coords.latitude, pos.coords.longitude]);\n      }, () => {\n        // Fallback to Delhi if geolocation fails\n        setUserPosition([28.6139, 77.2090]);\n      });\n    } else {\n      setUserPosition([28.6139, 77.2090]);\n    }\n  }, []);\n\n  // Calculate distance using Haversine formula\n  const calculateDistance = (pos1, pos2) => {\n    const toRad = x => x * Math.PI / 180;\n    const R = 6371; // Earth radius in km\n    const dLat = toRad(pos2[0] - pos1[0]);\n    const dLon = toRad(pos2[1] - pos1[1]);\n    const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.cos(toRad(pos1[0])) * Math.cos(toRad(pos2[0])) * Math.sin(dLon / 2) * Math.sin(dLon / 2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    return R * c;\n  };\n\n  // Update distance and ETA\n  useEffect(() => {\n    if (userPosition) {\n      const dist = calculateDistance(userPosition, busPosition);\n      setDistance(dist.toFixed(1));\n      const estimatedTime = Math.round(dist / 0.8); // Assuming 0.8 km/min average speed\n      setEta(estimatedTime + \" min\");\n      console.log('📏 Distance:', dist.toFixed(1), 'km, ETA:', estimatedTime, 'min');\n    }\n  }, [busPosition, userPosition]);\n\n  // Start bus tracking with better logic\n  const startTracking = useCallback(() => {\n    console.log('🚌 Starting bus tracking...');\n    setIsTracking(true);\n    setShouldZoomToStart(true); // Trigger zoom to bus location\n\n    // Reset zoom trigger after a moment\n    setTimeout(() => setShouldZoomToStart(false), 2000);\n    intervalRef.current = setInterval(() => {\n      setCurrentIndex(prevIndex => {\n        const newIndex = prevIndex < routeCoords.length - 1 ? prevIndex + 1 : prevIndex;\n        console.log(`🚌 Moving from index ${prevIndex} to ${newIndex}`);\n        if (newIndex < routeCoords.length) {\n          const newPosition = routeCoords[newIndex];\n          console.log(`📍 New position: ${newPosition[0]}, ${newPosition[1]}`);\n          setBusPosition(newPosition);\n          const progressPercent = newIndex / (routeCoords.length - 1) * 100;\n          setProgress(progressPercent);\n          console.log(`📊 Progress: ${Math.round(progressPercent)}%`);\n        }\n        if (newIndex >= routeCoords.length - 1) {\n          console.log('🏁 Bus reached destination!');\n          clearInterval(intervalRef.current);\n          setIsTracking(false);\n          setProgress(100);\n        }\n        return newIndex;\n      });\n    }, 2500); // Faster updates - every 2.5 seconds\n  }, []); // No dependencies needed\n\n  // Stop bus tracking\n  const stopTracking = () => {\n    console.log('⏸️ Stopping bus tracking...');\n    if (intervalRef.current) {\n      clearInterval(intervalRef.current);\n      intervalRef.current = null;\n    }\n    setIsTracking(false);\n  };\n\n  // Reset tracking to start\n  const resetTracking = () => {\n    console.log('🔄 Resetting bus tracking...');\n    stopTracking();\n    setCurrentIndex(0);\n    setBusPosition(routeCoords[0]);\n    setProgress(0);\n    setShowExpandedInfo(false); // Close expanded info on reset\n  };\n\n  // Toggle expanded info panel\n  const toggleExpandedInfo = () => {\n    setShowExpandedInfo(!showExpandedInfo);\n  };\n\n  // Auto-start tracking after component mount\n  useEffect(() => {\n    const autoStartTimer = setTimeout(() => {\n      console.log('🚀 Auto-starting tracking...');\n      startTracking();\n    }, 3000); // Wait 3 seconds then auto-start\n\n    return () => {\n      clearTimeout(autoStartTimer);\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n      }\n    };\n  }, [startTracking]); // Include startTracking as dependency\n\n  // Debug useEffect to track state changes\n  useEffect(() => {\n    console.log(`📊 State Update - Index: ${currentIndex}, Tracking: ${isTracking}, Progress: ${Math.round(progress)}%`);\n  }, [currentIndex, isTracking, progress]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app-mobile\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header-mobile\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"back-btn\",\n        children: \"\\u2190\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"header-title\",\n        children: \"Live Tracking\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"map-container-mobile\",\n      children: [/*#__PURE__*/_jsxDEV(MapContainer, {\n        center: busPosition,\n        zoom: 7,\n        style: {\n          height: \"100%\",\n          width: \"100%\"\n        },\n        attributionControl: false,\n        children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n          url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Polyline, {\n          positions: routeCoords,\n          color: \"#ff8c00\",\n          weight: 4,\n          opacity: 0.7\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Marker, {\n          position: busPosition,\n          icon: getBusIcon(isTracking),\n          children: /*#__PURE__*/_jsxDEV(Popup, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"popup-content\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"\\uD83D\\uDE8C Live Bus Location\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 234,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 235,\n                columnNumber: 17\n              }, this), \"Progress: \", Math.round(progress), \"%\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 236,\n                columnNumber: 17\n              }, this), \"Status: \", isTracking ? \"Moving\" : \"Stopped\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 11\n        }, this), userPosition && /*#__PURE__*/_jsxDEV(Marker, {\n          position: userPosition,\n          icon: userIcon,\n          children: /*#__PURE__*/_jsxDEV(Popup, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"popup-content\",\n              children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"\\uD83D\\uDCCD Your Location\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 246,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(MoveMapToBus, {\n          position: busPosition,\n          zoom: 12,\n          shouldZoom: shouldZoomToStart\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"floating-controls-mobile\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `control-btn ${isTracking ? 'active' : ''}`,\n          onClick: isTracking ? stopTracking : startTracking,\n          title: isTracking ? 'Stop Tracking' : 'Start Tracking',\n          children: isTracking ? '⏸️' : '▶️'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"control-btn reset-btn\",\n          onClick: resetTracking,\n          title: \"Reset to Start\",\n          children: \"\\uD83D\\uDD04\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 9\n      }, this), showExpandedInfo && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"expanded-info-circle\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"close-info-btn\",\n          onClick: toggleExpandedInfo,\n          title: \"Close Info\",\n          children: \"\\u2715\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"info-circle-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"info-main\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"info-main-icon\",\n              children: isTracking ? '🟢' : progress === 100 ? '🏁' : '🟡'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"info-main-text\",\n              children: isTracking ? 'Tracking' : progress === 100 ? 'Complete' : 'Ready'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 297,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"progress-ring-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"progress-ring-svg\",\n              width: \"80\",\n              height: \"80\",\n              children: [/*#__PURE__*/_jsxDEV(\"defs\", {\n                children: [/*#__PURE__*/_jsxDEV(\"linearGradient\", {\n                  id: \"progressGradient\",\n                  x1: \"0%\",\n                  y1: \"0%\",\n                  x2: \"100%\",\n                  y2: \"100%\",\n                  children: [/*#__PURE__*/_jsxDEV(\"stop\", {\n                    offset: \"0%\",\n                    stopColor: \"#fff\",\n                    stopOpacity: \"0.9\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 307,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"stop\", {\n                    offset: \"50%\",\n                    stopColor: \"#f0f8ff\",\n                    stopOpacity: \"1\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 308,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"stop\", {\n                    offset: \"100%\",\n                    stopColor: \"#e6f3ff\",\n                    stopOpacity: \"0.8\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 309,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 306,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"filter\", {\n                  id: \"glow\",\n                  children: [/*#__PURE__*/_jsxDEV(\"feGaussianBlur\", {\n                    stdDeviation: \"3\",\n                    result: \"coloredBlur\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 312,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"feMerge\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"feMergeNode\", {\n                      in: \"coloredBlur\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 314,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"feMergeNode\", {\n                      in: \"SourceGraphic\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 315,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 313,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 311,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 305,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"circle\", {\n                cx: \"40\",\n                cy: \"40\",\n                r: \"35\",\n                stroke: \"rgba(255,255,255,0.3)\",\n                strokeWidth: \"3\",\n                fill: \"none\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 319,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"circle\", {\n                cx: \"40\",\n                cy: \"40\",\n                r: \"35\",\n                stroke: \"url(#progressGradient)\",\n                strokeWidth: \"4\",\n                fill: \"none\",\n                strokeLinecap: \"round\",\n                strokeDasharray: `${2 * Math.PI * 35}`,\n                strokeDashoffset: `${2 * Math.PI * 35 * (1 - progress / 100)}`,\n                style: {\n                  transition: 'stroke-dashoffset 0.6s cubic-bezier(0.4, 0, 0.2, 1)'\n                },\n                filter: \"url(#glow)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 327,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"progress-text\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"progress-percent\",\n                children: [Math.round(progress), \"%\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 342,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 341,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"info-items\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"info-item-expanded\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"info-icon-expanded\",\n                children: \"\\uD83D\\uDCCD\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 349,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"info-value-expanded\",\n                children: distance || '0.0'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 350,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"info-unit-expanded\",\n                children: \"KM\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 353,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"info-item-expanded\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"info-icon-expanded\",\n                children: \"\\uD83D\\uDD52\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 356,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"info-value-expanded\",\n                children: eta ? eta.split(' ')[0] : '0'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 357,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"info-unit-expanded\",\n                children: \"MIN\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 360,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 203,\n    columnNumber: 5\n  }, this);\n}\n_s2(App, \"50bWXMQcWZte2C1Vz7Qo7xxc/9E=\");\n_c2 = App;\nexport default App;\nvar _c, _c2;\n$RefreshReg$(_c, \"MoveMapToBus\");\n$RefreshReg$(_c2, \"App\");","map":{"version":3,"names":["React","useEffect","useState","useRef","useCallback","MapContainer","TileLayer","Marker","Popup","useMap","Polyline","L","jsxDEV","_jsxDEV","getBusIcon","isMoving","divIcon","html","iconSize","iconAnchor","popupAnchor","className","userIcon","routeCoords","MoveMapToBus","position","zoom","shouldZoom","_s","map","setView","animate","duration","panTo","_c","App","_s2","busPosition","setBusPosition","userPosition","setUserPosition","distance","setDistance","eta","setEta","currentIndex","setCurrentIndex","isTracking","setIsTracking","progress","setProgress","showExpandedInfo","setShowExpandedInfo","shouldZoomToStart","setShouldZoomToStart","intervalRef","navigator","geolocation","getCurrentPosition","pos","coords","latitude","longitude","calculateDistance","pos1","pos2","toRad","x","Math","PI","R","dLat","dLon","a","sin","cos","c","atan2","sqrt","dist","toFixed","estimatedTime","round","console","log","startTracking","setTimeout","current","setInterval","prevIndex","newIndex","length","newPosition","progressPercent","clearInterval","stopTracking","resetTracking","toggleExpandedInfo","autoStartTimer","clearTimeout","children","fileName","_jsxFileName","lineNumber","columnNumber","center","style","height","width","attributionControl","url","positions","color","weight","opacity","icon","onClick","title","id","x1","y1","x2","y2","offset","stopColor","stopOpacity","stdDeviation","result","in","cx","cy","r","stroke","strokeWidth","fill","strokeLinecap","strokeDasharray","strokeDashoffset","transition","filter","split","_c2","$RefreshReg$"],"sources":["D:/PROJECT/smartbus-tracker/src/App.js"],"sourcesContent":["import React, { useEffect, useState, useRef, useCallback } from \"react\";\nimport { MapContainer, TileLayer, Marker, Popup, useMap, Polyline } from \"react-leaflet\";\nimport L from \"leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport \"./App.css\";\n\n// Dynamic bus icon based on tracking state\nconst getBusIcon = (isMoving) => L.divIcon({\n  html: `\n    <div class=\"bus-marker-mobile ${isMoving ? 'moving' : ''}\">\n      <div class=\"bus-icon-circle\">\n        <div class=\"bus-icon\">🚌</div>\n      </div>\n    </div>\n  `,\n  iconSize: [40, 40],\n  iconAnchor: [20, 20],\n  popupAnchor: [0, -25],\n  className: 'custom-bus-marker'\n});\n\n// User Location - Blue Dot\nconst userIcon = L.divIcon({\n  html: `\n    <div class=\"user-marker-mobile\">\n      <div class=\"user-dot\"></div>\n    </div>\n  `,\n  iconSize: [16, 16],\n  iconAnchor: [8, 8],\n  popupAnchor: [0, -15],\n  className: 'custom-user-marker'\n});\n\n// Route coordinates\nconst routeCoords = [\n  [30.3165, 78.0322], // Dehradun\n  [29.8661, 77.8945], // Roorkee\n  [29.4727, 77.7085], // Muzaffarnagar\n  [29.2100, 77.0400], // Meerut\n  [28.6139, 77.2090], // Delhi\n];\n\n// Auto-move map to bus location with zoom control\nfunction MoveMapToBus({ position, zoom, shouldZoom }) {\n  const map = useMap();\n  useEffect(() => {\n    if (position) {\n      if (shouldZoom) {\n        // Zoom to bus location when tracking starts\n        map.setView(position, zoom || 10, {\n          animate: true,\n          duration: 1.5\n        });\n      } else {\n        // Just pan to position during tracking\n        map.panTo(position, {\n          animate: true,\n          duration: 0.8\n        });\n      }\n    }\n  }, [position, map, zoom, shouldZoom]);\n  return null;\n}\n\nfunction App() {\n  const [busPosition, setBusPosition] = useState(routeCoords[0]);\n  const [userPosition, setUserPosition] = useState(null);\n  const [distance, setDistance] = useState(\"0.0\");\n  const [eta, setEta] = useState(\"-- min\");\n  const [currentIndex, setCurrentIndex] = useState(0);\n  const [isTracking, setIsTracking] = useState(false);\n  const [progress, setProgress] = useState(0);\n  const [showExpandedInfo, setShowExpandedInfo] = useState(false);\n  const [shouldZoomToStart, setShouldZoomToStart] = useState(false);\n  const intervalRef = useRef(null);\n\n  // Get user location\n  useEffect(() => {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(\n        (pos) => {\n          setUserPosition([pos.coords.latitude, pos.coords.longitude]);\n        },\n        () => {\n          // Fallback to Delhi if geolocation fails\n          setUserPosition([28.6139, 77.2090]);\n        }\n      );\n    } else {\n      setUserPosition([28.6139, 77.2090]);\n    }\n  }, []);\n\n  // Calculate distance using Haversine formula\n  const calculateDistance = (pos1, pos2) => {\n    const toRad = (x) => (x * Math.PI) / 180;\n    const R = 6371; // Earth radius in km\n    const dLat = toRad(pos2[0] - pos1[0]);\n    const dLon = toRad(pos2[1] - pos1[1]);\n    const a =\n      Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n      Math.cos(toRad(pos1[0])) * Math.cos(toRad(pos2[0])) * Math.sin(dLon / 2) * Math.sin(dLon / 2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    return R * c;\n  };\n\n  // Update distance and ETA\n  useEffect(() => {\n    if (userPosition) {\n      const dist = calculateDistance(userPosition, busPosition);\n      setDistance(dist.toFixed(1));\n      const estimatedTime = Math.round(dist / 0.8); // Assuming 0.8 km/min average speed\n      setEta(estimatedTime + \" min\");\n      console.log('📏 Distance:', dist.toFixed(1), 'km, ETA:', estimatedTime, 'min');\n    }\n  }, [busPosition, userPosition]);\n\n  // Start bus tracking with better logic\n  const startTracking = useCallback(() => {\n    console.log('🚌 Starting bus tracking...');\n    setIsTracking(true);\n    setShouldZoomToStart(true); // Trigger zoom to bus location\n    \n    // Reset zoom trigger after a moment\n    setTimeout(() => setShouldZoomToStart(false), 2000);\n    \n    intervalRef.current = setInterval(() => {\n      setCurrentIndex(prevIndex => {\n        const newIndex = prevIndex < routeCoords.length - 1 ? prevIndex + 1 : prevIndex;\n        console.log(`🚌 Moving from index ${prevIndex} to ${newIndex}`);\n        \n        if (newIndex < routeCoords.length) {\n          const newPosition = routeCoords[newIndex];\n          console.log(`📍 New position: ${newPosition[0]}, ${newPosition[1]}`);\n          setBusPosition(newPosition);\n          \n          const progressPercent = (newIndex / (routeCoords.length - 1)) * 100;\n          setProgress(progressPercent);\n          console.log(`📊 Progress: ${Math.round(progressPercent)}%`);\n        }\n        \n        if (newIndex >= routeCoords.length - 1) {\n          console.log('🏁 Bus reached destination!');\n          clearInterval(intervalRef.current);\n          setIsTracking(false);\n          setProgress(100);\n        }\n        \n        return newIndex;\n      });\n    }, 2500); // Faster updates - every 2.5 seconds\n  }, []); // No dependencies needed\n\n  // Stop bus tracking\n  const stopTracking = () => {\n    console.log('⏸️ Stopping bus tracking...');\n    if (intervalRef.current) {\n      clearInterval(intervalRef.current);\n      intervalRef.current = null;\n    }\n    setIsTracking(false);\n  };\n\n  // Reset tracking to start\n  const resetTracking = () => {\n    console.log('🔄 Resetting bus tracking...');\n    stopTracking();\n    setCurrentIndex(0);\n    setBusPosition(routeCoords[0]);\n    setProgress(0);\n    setShowExpandedInfo(false); // Close expanded info on reset\n  };\n\n  // Toggle expanded info panel\n  const toggleExpandedInfo = () => {\n    setShowExpandedInfo(!showExpandedInfo);\n  };\n\n  // Auto-start tracking after component mount\n  useEffect(() => {\n    const autoStartTimer = setTimeout(() => {\n      console.log('🚀 Auto-starting tracking...');\n      startTracking();\n    }, 3000); // Wait 3 seconds then auto-start\n    \n    return () => {\n      clearTimeout(autoStartTimer);\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n      }\n    };\n  }, [startTracking]); // Include startTracking as dependency\n\n  // Debug useEffect to track state changes\n  useEffect(() => {\n    console.log(`📊 State Update - Index: ${currentIndex}, Tracking: ${isTracking}, Progress: ${Math.round(progress)}%`);\n  }, [currentIndex, isTracking, progress]);\n\n\n  return (\n    <div className=\"app-mobile\">\n      {/* Mobile Header - Orange */}\n      <div className=\"header-mobile\">\n        <button className=\"back-btn\">←</button>\n        <h1 className=\"header-title\">Live Tracking</h1>\n      </div>\n\n      {/* Main Map Container */}\n      <div className=\"map-container-mobile\">\n        <MapContainer\n          center={busPosition}\n          zoom={7}\n          style={{ height: \"100%\", width: \"100%\" }}\n          attributionControl={false}\n        >\n          <TileLayer\n            url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n          />\n          \n          {/* Route Line */}\n          <Polyline\n            positions={routeCoords}\n            color=\"#ff8c00\"\n            weight={4}\n            opacity={0.7}\n          />\n\n          {/* Bus Marker - Round Orange with Animation */}\n          <Marker position={busPosition} icon={getBusIcon(isTracking)}>\n            <Popup>\n              <div className=\"popup-content\">\n                <strong>🚌 Live Bus Location</strong>\n                <br />Progress: {Math.round(progress)}%\n                <br />Status: {isTracking ? \"Moving\" : \"Stopped\"}\n              </div>\n            </Popup>\n          </Marker>\n\n          {/* User Marker - Blue Dot */}\n          {userPosition && (\n            <Marker position={userPosition} icon={userIcon}>\n              <Popup>\n                <div className=\"popup-content\">\n                  <strong>📍 Your Location</strong>\n                </div>\n              </Popup>\n            </Marker>\n          )}\n\n          <MoveMapToBus \n            position={busPosition} \n            zoom={12}\n            shouldZoom={shouldZoomToStart}\n          />\n        </MapContainer>\n\n\n        {/* Floating Control Buttons */}\n        <div className=\"floating-controls-mobile\">\n          <button \n            className={`control-btn ${isTracking ? 'active' : ''}`}\n            onClick={isTracking ? stopTracking : startTracking}\n            title={isTracking ? 'Stop Tracking' : 'Start Tracking'}\n          >\n            {isTracking ? '⏸️' : '▶️'}\n          </button>\n          <button \n            className=\"control-btn reset-btn\"\n            onClick={resetTracking}\n            title=\"Reset to Start\"\n          >\n            🔄\n          </button>\n        </div>\n\n\n\n        {/* Expandable Info Circle - Left Side */}\n        {showExpandedInfo && (\n          <div className=\"expanded-info-circle\">\n            <button \n              className=\"close-info-btn\"\n              onClick={toggleExpandedInfo}\n              title=\"Close Info\"\n            >\n              ✕\n            </button>\n            \n            <div className=\"info-circle-content\">\n              {/* Main Status */}\n              <div className=\"info-main\">\n                <div className=\"info-main-icon\">\n                  {isTracking ? '🟢' : (progress === 100 ? '🏁' : '🟡')}\n                </div>\n                <div className=\"info-main-text\">\n                  {isTracking ? 'Tracking' : (progress === 100 ? 'Complete' : 'Ready')}\n                </div>\n              </div>\n              \n              {/* Progress Ring */}\n              <div className=\"progress-ring-container\">\n                <svg className=\"progress-ring-svg\" width=\"80\" height=\"80\">\n                  <defs>\n                    <linearGradient id=\"progressGradient\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\n                      <stop offset=\"0%\" stopColor=\"#fff\" stopOpacity=\"0.9\" />\n                      <stop offset=\"50%\" stopColor=\"#f0f8ff\" stopOpacity=\"1\" />\n                      <stop offset=\"100%\" stopColor=\"#e6f3ff\" stopOpacity=\"0.8\" />\n                    </linearGradient>\n                    <filter id=\"glow\">\n                      <feGaussianBlur stdDeviation=\"3\" result=\"coloredBlur\"/>\n                      <feMerge> \n                        <feMergeNode in=\"coloredBlur\"/>\n                        <feMergeNode in=\"SourceGraphic\"/> \n                      </feMerge>\n                    </filter>\n                  </defs>\n                  <circle\n                    cx=\"40\"\n                    cy=\"40\"\n                    r=\"35\"\n                    stroke=\"rgba(255,255,255,0.3)\"\n                    strokeWidth=\"3\"\n                    fill=\"none\"\n                  />\n                  <circle\n                    cx=\"40\"\n                    cy=\"40\"\n                    r=\"35\"\n                    stroke=\"url(#progressGradient)\"\n                    strokeWidth=\"4\"\n                    fill=\"none\"\n                    strokeLinecap=\"round\"\n                    strokeDasharray={`${2 * Math.PI * 35}`}\n                    strokeDashoffset={`${2 * Math.PI * 35 * (1 - progress / 100)}`}\n                    style={{ transition: 'stroke-dashoffset 0.6s cubic-bezier(0.4, 0, 0.2, 1)' }}\n                    filter=\"url(#glow)\"\n                  />\n                </svg>\n                <div className=\"progress-text\">\n                  <span className=\"progress-percent\">{Math.round(progress)}%</span>\n                </div>\n              </div>\n              \n              {/* Info Items */}\n              <div className=\"info-items\">\n                <div className=\"info-item-expanded\">\n                  <span className=\"info-icon-expanded\">📍</span>\n                  <span className=\"info-value-expanded\">\n                    {distance || '0.0'}\n                  </span>\n                  <span className=\"info-unit-expanded\">KM</span>\n                </div>\n                <div className=\"info-item-expanded\">\n                  <span className=\"info-icon-expanded\">🕒</span>\n                  <span className=\"info-value-expanded\">\n                    {eta ? eta.split(' ')[0] : '0'}\n                  </span>\n                  <span className=\"info-unit-expanded\">MIN</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}